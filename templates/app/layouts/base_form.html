{% extends 'base.html' %} {% load widget_tweaks %}

{% block base_content %}
<div class="max-w-4xl mx-auto">
  <form action="" method="POST" class="space-y-6 bg-white p-8 rounded-xl shadow-sm border border-slate-200" x-data = "{
    articleStatus: ''
  }">
    {% csrf_token %}

    <div class="space-y-2">
      <label class="text-sm font-bold text-slate-700 uppercase tracking-wide">Article Title</label>
      {% render_field form.title class="w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 outline-none transition-all text-lg font-medium" %}
    </div>

    <div class="grid grid-cols-1 {% if article %}md:grid-cols-2{% endif %} gap-6">
      <div class="space-y-2 bg-slate-50 p-4 rounded-lg">
        <label class="text-xs font-bold text-slate-500 uppercase">Status</label>
        {% render_field form.status class="w-full px-3 py-2 rounded-md border border-slate-300 focus:ring-2 focus:ring-blue-500" x-bind::class="`article-status-${articleStatus}`" x-model.fill="articleStatus" %}
      </div> <!-- Double Colon is used by Vue.js, not Alpine. But in the Documentation of widget tweaks they mention that we have to use Double Colon instead of Single colon even for Alpine, if we wanna use AlpineJS alongside widget tweaks. The WHY ? Not mentioned in the widget tweks documentation ðŸ˜¯!! -->

      {% if article %}
      <div class="space-y-2 bg-slate-50 p-4 rounded-lg border border-slate-100">
        <label class="text-xs font-bold text-slate-800 uppercase">Metrics</label>
        <div class="flex flex-col justify-center h-full text-xs text-slate-600 space-y-1">
          {% block article_stats %}{% endblock %}
        </div>
      </div>
      {% endif %}
    </div>

    <div class="space-y-2">
      <label class="text-sm font-bold text-slate-700 uppercase tracking-wide">Content</label>
      {% render_field form.content %}
    </div>

    <div class="space-y-2 bg-blue-50 p-4 rounded-lg border border-blue-100">
      <label class="text-xs font-bold text-blue-900 uppercase flex items-center gap-2">
        <i class="fa-brands fa-x-twitter"></i> Twitter Snippet
      </label>
      {% render_field form.twitterPost class="w-full min-h-[80px] h-[80px] bg-white p-3 rounded-md border border-blue-200 focus:ring-2 focus:ring-blue-400 text-blue-900 font-semibold italic" %}
    </div>

    <div class="pt-4 border-t border-slate-100 flex justify-end gap-3">
      {% block buttons %}{% endblock %}
    </div>
  </form>
</div>
{% endblock %}

{% block javascript %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const el = document.getElementById("id_content");
    if (el) {
      new EasyMDE({
        element: el,
        spellChecker: false,
        status: false,
        forceSync: true,
      });
    }
  });
</script>
{% endblock %}